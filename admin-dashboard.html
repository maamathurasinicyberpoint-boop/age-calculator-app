<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - Manoj Babu CSC</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: system-ui, Arial, sans-serif; background: #fff7ed; color: #111; }
    header { background: #7f1d1d; color: #fff; padding: 16px 20px; }
    header h1 { font-size: 1.5rem; margin-bottom: 4px; }
    .muted { color: #d1d5db; }
    main { max-width: 1100px; margin: 20px auto; padding: 20px; }
    .section { background: #fff; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,.08); margin-bottom: 20px; }
    h2 { margin-bottom: 16px; color: #7f1d1d; }
    .badge { display: inline-block; background: #fee2e2; color: #991b1b; padding: 6px 10px; border-radius: 8px; font-weight: 700; border: 1px solid #fecaca; }
    .nav-links { margin-bottom: 20px; }
    .nav-links a { margin-right: 15px; color: #7f1d1d; text-decoration: none; font-weight: 500; }
    .nav-links a:hover { text-decoration: underline; }
    table { width: 100%; border-collapse: collapse; margin-top: 12px; }
    th, td { padding: 10px; text-align: left; border-bottom: 1px solid #e5e7eb; }
    th { background: #fef3c7; font-weight: 600; }
    input, select, button { padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; }
    button { background: #7f1d1d; color: #fff; cursor: pointer; font-weight: 500; border: none; }
    button:hover { background: #991b1b; }
    button.secondary { background: #6b7280; }
    button.secondary:hover { background: #4b5563; }
    .form-group { margin-bottom: 12px; }
    .form-group label { display: block; margin-bottom: 4px; font-weight: 500; }
    .status-pending { color: #d97706; font-weight: 600; }
    .status-processing { color: #2563eb; font-weight: 600; }
    .status-completed { color: #059669; font-weight: 600; }
    .status-cancelled { color: #dc2626; font-weight: 600; }
  </style>
</head>
<body>
  <header>
    <h1>Admin Dashboard</h1>
    <div class="muted">Welcome, <span id="name">Administrator</span> <span class="badge">Admin</span></div>
  </header>
  <main>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="login.html">Login</a>
      <a href="#services">Manage Services</a>
      <a href="#orders">Manage Orders</a>
    </div>

    <!-- Service Management -->
    <div class="section" id="services">
      <h2>Service Management</h2>
      <div class="form-group">
        <label>Service Name:</label>
        <input type="text" id="serviceName" placeholder="e.g., PAN Card Application">
      </div>
      <div class="form-group">
        <label>Price (₹):</label>
        <input type="number" id="servicePrice" placeholder="e.g., 150">
      </div>
      <button onclick="addService()">Add Service</button>
      <button class="secondary" onclick="saveServices()">Save All Services</button>
      
      <table id="serviceTable">
        <thead>
          <tr>
            <th>Service Name</th>
            <th>Price (₹)</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="serviceList">
        </tbody>
      </table>
    </div>

    <!-- Order Management -->
    <div class="section" id="orders">
      <h2>Order Management</h2>
      <table>
        <thead>
          <tr>
            <th>Order ID</th>
            <th>Customer</th>
            <th>Service</th>
            <th>Price</th>
            <th>Status</th>
            <th>Date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="orderList">
        </tbody>
      </table>
    </div>
  </main>

  <script>
    // Get admin name from URL
    const params = new URLSearchParams(location.search);
    const adminName = params.get('name');
    if (adminName) document.getElementById('name').textContent = adminName;

    // Load services from localStorage
    let services = JSON.parse(localStorage.getItem('services') || '[]');
    if (services.length === 0) {
      // Default services
      services = [
        { id: 1, name: 'PAN Card Application', price: 150 },
        { id: 2, name: 'PAN Card Correction', price: 120 },
        { id: 3, name: 'Aadhaar Card Update', price: 80 },
        { id: 4, name: 'Birth Certificate', price: 100 },
        { id: 5, name: 'Death Certificate', price: 100 },
        { id: 6, name: 'Income Certificate', price: 120 },
        { id: 7, name: 'Caste Certificate', price: 120 },
        { id: 8, name: 'Electricity Bill Payment', price: 30 },
        { id: 9, name: 'Water Bill Payment', price: 30 },
        { id: 10, name: 'Gas Bill Payment', price: 30 },
        { id: 11, name: 'Digital Documentation', price: 50 }
      ];
      localStorage.setItem('services', JSON.stringify(services));
    }

    function displayServices() {
      const tbody = document.getElementById('serviceList');
      tbody.innerHTML = '';
      services.forEach(service => {
        const row = tbody.insertRow();
        row.innerHTML = `
          <td>${service.name}</td>
          <td>₹${service.price}</td>
          <td>
            <button class="secondary" onclick="editService(${service.id})">Edit</button>
            <button class="secondary" onclick="deleteService(${service.id})">Delete</button>
          </td>
        `;
      });
    }

    function addService() {
      const name = document.getElementById('serviceName').value.trim();
      const price = document.getElementById('servicePrice').value;
      if (!name || !price) {
        alert('Please enter both service name and price');
        return;
      }
      const newId = services.length > 0 ? Math.max(...services.map(s => s.id)) + 1 : 1;
      services.push({ id: newId, name, price: parseFloat(price) });
      document.getElementById('serviceName').value = '';
      document.getElementById('servicePrice').value = '';
      displayServices();
      saveServices();
    }

    function editService(id) {
      const service = services.find(s => s.id === id);
      if (service) {
        const newName = prompt('Edit service name:', service.name);
        const newPrice = prompt('Edit price:', service.price);
        if (newName && newPrice) {
          service.name = newName;
          service.price = parseFloat(newPrice);
          displayServices();
          saveServices();
        }
      }
    }

    function deleteService(id) {
      if (confirm('Are you sure you want to delete this service?')) {
        services = services.filter(s => s.id !== id);
        displayServices();
        saveServices();
      }
    }

    function saveServices() {
      localStorage.setItem('services', JSON.stringify(services));
      alert('Services saved successfully!');
    }

    // Load orders from localStorage
    let orders = JSON.parse(localStorage.getItem('orders') || '[]');

    function displayOrders() {
      const tbody = document.getElementById('orderList');
      tbody.innerHTML = '';
      if (orders.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="text-align:center;">No orders yet</td></tr>';
        return;
      }
      orders.forEach(order => {
        const row = tbody.insertRow();
        const statusClass = 'status-' + order.status.toLowerCase();
        row.innerHTML = `
          <td>${order.id}</td>
          <td>${order.customerName}<br><small>${order.phone}</small></td>
          <td>${order.service}</td>
          <td>₹${order.price}</td>
          <td class="${statusClass}">${order.status}</td>
          <td>${order.date}</td>
          <td>
            <select onchange="updateOrderStatus(${order.id}, this.value)">
              <option value="">Change Status</option>
              <option value="Pending">Pending</option>
              <option value="Processing">Processing</option>
              <option value="Completed">Completed</option>
              <option value="Cancelled">Cancelled</option>
            </select>
          </td>
        `;
      });
    }

    function updateOrderStatus(orderId, newStatus) {
      if (!newStatus) return;
      const order = orders.find(o => o.id === orderId);
      if (order) {
        order.status = newStatus;
        localStorage.setItem('orders', JSON.stringify(orders));
        displayOrders();
        alert('Order status updated to: ' + newStatus);
      }
    }

    // Initialize displays
    displayServices();
    displayOrders();
  </script>
</body>
</html>
